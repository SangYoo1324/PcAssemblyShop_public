<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/specialOffersPage.css">

    <link rel="stylesheet" href="/bootstrapCSS_v5/bootstrap.css">
    <link rel="stylesheet" href="/bootstrapCSS_v5/bootstrap.min.css">
    <link rel="shortcut icon" type="image/x-icon" href="/images/icons8-system-task-16.png">
    <script src="https://kit.fontawesome.com/edff7358ca.js" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"> -->
    <title>Puget Sound Customs</title>
</head>
<body>
{{>parts/header}}

<!-- placeholder section Plz remove onnce contents updated  -->
<section class="h-[1000px] w-[100%]">
    <br><br><br><br><br><br>
    ADMIN PAGE
    <label for="">Image</label>
    <input id="file" type="file" name="file" >

    <br>
    <label for="">Category</label>
    <select class="category block" name="category">
        <option value="1" selected="selected">gamingPc</option>
        <option value="2">workstationPc</option>
        <option value="3">accessory</option>
    </select>
    <label for="">Name</label>
    <input id="name" type="text" name="name">
    <label for="">Company</label>
    <input id="company" type="text" name="category">
    <label for="">price</label>
    <input id="price" type="text" name="price">
    <label for="">stock</label>
    <input id="stock" type="text" name="stock">
    <label for="">featuredEnv</label>
    <input id="featured_env" type="text" name="featured_env">
    <button class="submit-btn">submit</button>



    <button class="btn_enable_admin">Enable Admin Mode</button>
</section>

{{>parts/footer}}

<script>
    //Image Confirm Button
    $('.submit-btn').on('click',function() {
        imgSender("itemInfo");
    });


    function imgSender(target){
        var file = $('#file')[0]  // html DOM id=file 자체
                .files[0];  // input DOM에 저장된 file들 중 첫번째꺼( 어차피 한개밖에 선택 못함)
        console.log(file);
        let form_data = new FormData();
        form_data.append("file", file);
        form_data.append("category", $('.category').val());
        form_data.append("name",$('#name').val());
        form_data.append("company",$('#company').val());
        form_data.append("price",$('#price').val());
        form_data.append("stock",$('#stock').val());
        form_data.append("featured_env",$('#featured_env').val());
        $.ajax({
            data: form_data,
            type: "POST",
            url: "/api/"+target,
            cache: false,
            contentType: false,
            enctype: 'multipart/form-data',
            processData: false,
            success: function (url) {
                alert("Success sending file to :::::" + url);
                window.location.reload();
            },
            error: function (err) {
                alert(err);
            }
        });
    }
</script>
<script src="/js/mainPage.js"></script>
<script src="/bootstrapJS_v5/bootstrap.bundle.js"></script>
<script src="/bootstrapJS_v5/bootstrap.bundle.min.js"></script>
</body>
</html>