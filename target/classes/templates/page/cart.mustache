<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/mainPage.css">
    <link rel="stylesheet" href="/css/cartPage.css">
    <link rel="stylesheet" href="/bootstrapCSS_v5/bootstrap.css">
    <link rel="stylesheet" href="/bootstrapCSS_v5/bootstrap.min.css">
    <link rel="shortcut icon" type="image/x-icon" href="/images/icons8-system-task-16.png">
    <script src="https://kit.fontawesome.com/edff7358ca.js" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>






    <style type="text/css">
        table { border: 0; }
        table td { padding: 10px; }
    </style>

    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"> -->
    <title>Puget Sound Customs</title>
</head>
<body>
{{>parts/header}}

<section class="h-[1000px]">
 <div class="con pt-[200px]">

     <h1 class="pt-[200px]">Check Out</h1>
     <br/>

     <div id="btn-paypal-checkout"></div>

     <form action="/post/paypal" method="POST">
         <div class="mb-3">
             <label for="exampleInputEmail1" class="form-label">product</label>
             <input type="text" name="product" value="Next iPhone" />
         </div>
         <div class="mb-3">
             <label for="exampleInputEmail1" class="form-label">subtotal</label>
             <input type="text" name="subtotal" value="100" />
         </div>
         <div class="mb-3">
             <label for="exampleInputEmail1" class="form-label">amount</label>
             <input type="text" name="shipping" value="10" />
         </div>
         <div class="mb-3">
             <label for="exampleInputEmail1" class="form-label">total</label>
             <input type="text" name="total" value="120" />
         </div>
         <button type="submit" class="btn btn-primary">Submit</button>
     </form>

</div>

  <div id="paypal-button-container"></div>
</section>


{{>parts/footer}}
<script src="https://www.paypal.com/sdk/js?client-id=AZX15KyBkRKjl7xZRvxUTl2abO4jICbmMoUT0zfDZg9wJaid0yHvliclpdO4oUWRhe75hFGtXZsyaBEw"></script>

<script>
    paypal.Buttons({
        createOrder: function(data,actions){
            return actions.order.create({
                payer:{
                    address:{
                        address_line_1: "1111 S 235th pl",
                        address_line_2: "apt",
                        admin_area_2: "Federalway",
                        admin_area_1: "WA",
                        postal_code: "98198",
                        country_code: "US"
                    }
                },
                purchase_units:[{
                    amount:{
                        value: '1.99'
                    }
                }]
            })
        },
        onApprove: function(data,actions){
            return actions.order.capture().then(function(orderData){
                console.log(JSON.stringify(orderData,null,2));

                $.ajax({
                    type: 'POST',
                    dataType: "json",
                    contentType: 'application/json',
                    data: JSON.stringify(orderData,null,2),
                    url: "/api/paypal/process"
                }).done(function(rest){
                    location.href="/page/redirectPage/receipt"
                }).fail(function(error){
                    alert("Process failed. Payment didn't process")
                })
            })
        }
    }).render('#paypal-button-container');

</script>

<script src="/js/mainPage.js"></script>

<script src="/bootstrapJS_v5/bootstrap.bundle.js"></script>
<script src="/bootstrapJS_v5/bootstrap.bundle.min.js"></script>
</body>
</html>